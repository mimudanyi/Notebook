# 代理模式

## 一、代理模式的定义

是指，为其他对象提供一种代理以控制对这个对象的访问。在某些情况下,一个对象不适合或者不能直接引用另一个对象，而代理对象可以在客户类和目标对象之间起到中介的作用。

## 二、代理模式的作用

1.功能增强:在你原有的功能上，增加了额外的功能。新增加的功能，叫做功能增强。
2.控制访问:代理类不让你访问目标，例如商家不让用户访问厂家。

## 三、实现代理的方式

### 3.1静态代理

#### 特点

1. 实现简单
2. 容易理解。

#### 缺点

1. 当目标类增加了，代理类可能也需要成倍的增加。代理类数量过多。
2. 当你的接口中功能增加了，或者修改了，会影响众多的实现类，厂家类，代理都需要修改。
   影响比较多。

### 3.2 动态代理

#### 定义

动态代理是指代理类对象在程序运行时由 JVM 根据反射机制动态生成的。动态代理不需要定义代理类的 .java 源文件。
动态代理其实就是 JDK 运行期间，动态创建 class 字节码并加载到 JVM。

#### 实现动态代理的方式

##### 使用 JDK 代理代理

JDK 动态代理是基于 Java 的反射机制实现的。使用 JDK中接口和类实现代理对象的动态创建。
JDK 的动态要求目标对象必须实现接口，这是 Java 设计上的要求。
从 JDK 1.3 以来，Java语言通过 java.lang.reflect 包提供三个类支持代理模式 Proxy，Method 和 InovcationHandler。

##### 通过 CGLIB 动态代理

CGLIB（Code Generation Library）是一个开源项目。是一个强大的，高性能，高质量的 Code 生成类库，它可以在运行期扩展 Java 类与实现 Java 接口。它广泛的被许多 AOP 的框架使用,例如 Spring AOP。
CGLIB 的原理是继承，通过继承目标类，创建它的子类，在子类中重写父类中同名的方法，实现功能的修改。



