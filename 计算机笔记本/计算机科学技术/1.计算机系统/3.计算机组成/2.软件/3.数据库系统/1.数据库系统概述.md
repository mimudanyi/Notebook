# 数据库系统（Database ，简称DB）概述

## 一、数据库管理技术

### 概念

信息（information）：是现实世界中对客观事物的反映，这种反映主要体现为事物属性的表现形式，是对事物存在方式或运动状态的刻画。

数据（data）：是描述事务的符号记录，是信息的符号化表示，是信息的载体。

### 发展过程

- 人工管理阶段

- 文件系统阶段

- 数据库系统阶段

![数据库管理系统的发展历程](C:\Users\23198\Desktop\笔记本\计算机科学技术\1.计算机系统\3.计算机组成\2.软件\3.数据库系统\Pictures\数据库管理系统发展阶段.png)

## 二、大数据分析与管理技术

### 2.1 大数据处理模式

1.分布式批处理模式的代表——Hadoop（Apache基金会用Java语言开发的开源分布式批处理架构）

批处理是对数据先存储后统一处理

2.分布式流处理模式的代表——storm

流处理将源源不断产生的数据视为数据流，每当新的数据到达系统时，就立刻对数据进行处理并返回就在、结果。（也是Apache开发的）

### 2.2 大数据处理的基本流程

1.数据集成

2.数据分析

3.数据解释

## 三、数据库系统概述

### 3.1 数据库系统的（体系）结构

数据库系统的结构——三级模式结构（SPARC分级结构）

- **内模式——物理级数据库**

  内模式又称存储模式，是对数据的物理结构和存储方式的描述。例如，数据记录如何存储，是顺序存储还是按照索引存储，索引以什么方式组织等。内模式是由数据库系统提供的数据定义语言定义的。

- **概念模式——概念级数据库**

  概念模式又叫作数据库模式（简称模式），是数据库中全部数据的逻辑结构的描述。概念模式以某种数据模型为基础，并用模式定义语言定义这些内容，它可以看作是现实世界中的实体在具体数据库系统中的实现。概念模式与具体的应用程序无关，同时也不涉及数据的存储细节和硬件环培。

- **外模式——用户级数据库**

![数据库系统的三级结构](Pictures\数据库系统的三级模式.png)

### 3.2 数据库系统的组成

#### 3.2.1 按逻辑结构分

- 数据库（SQL Server数据库的数据文件以 .mdf 或 .ndf 为扩展名）

- 数据库管理系统（Database Management System，简称DBMS）：数据库的管理软件

- 应用程序

- 系统用户
  - 系统用户
  - 系统管理员用户

![数据库系统各部分之间的关系](Pictures\数据库系统各部分之间的关系.png)

![数据库人员可操控的抽象数据](Pictures\数据库人员可操控的抽象数据.png)

#### 3.2.2 按组成结构分

- 数据库系统包含一切支持系统运行的硬件、软件、人员、数据库等部分。
- 硬件包括计算机、网络等，
- 软件包括操作系统、DBMS、应用程序等支持系统运行的所有软件
- 人员包括应用程序设计人员、开发人员、系统终端用户、系统管理员

### 3.3 数据库的工作流程

![数据库工作流程图](Pictures\数据库工作流程图.png)

（1）DBMS首先对数据查询语句进行语法检查，然后从数据字典中找到该用户对应的外模式，同时进行权限检查;若发现错误，则将错误信息返回给用户。
（2）DBMS根据找到的外模式，利用概念模式/外模式映像，将其映像到概念模式，确定概念模式应该读入哪些数据。
（3）DBMS 利用内模式/概念模式映像，将概念模式映像到内模式，确定数据库应读入哪些物理记录及其具体的地址。
（4）DBMS根据地址信息向操作系统发出读取记录的命令。
（5）操作系统执行读取数据的命令，并将数据从硬盘读入系统缓冲区，将执行结果通知DBMS。
（6）DBMS根据查询语句及数据字典定义的信息，将系统缓冲区中的数据转换成用户所需的记录格式。
（7）DBMS将数据记录从系统缓冲区传送到用户工作区。
由此可见，在数据库系统中，数据库管理系统，即 DBMS处于中心地位。DBMS并不是直接读取数据库中的数据，而是通过操作系统访问数据库，数据库系统是基于操作系统的。

## 四、数据模型

### 4.1 数据模型分类

（1）.按概念模型（信息模型）

（2）.按逻辑模型

- 网状模型

![网状模型](Pictures\网状模型.png)

- 层次模型

  ![层次模型](Pictures\层次模型.png)

- 关系模型

  ![关系模型](Pictures\关系模型.png)

- 面对对象模型

（3）.按物理模型

### 4.2 数据模型的基本要素

- 数据结构
- 数据操作
- 数据的约束条件

## 五、概念模型的描述

### 5.1 从现实世界到机器世界的转换过程

![从现实世界到机器世界的转换过程](Pictures\从现实世界到机器世界的转换过程.png)

### 5.2 实体及其联系（信息世界涉及的相关概念）

- 实体
- 属性
- 码（关键字）
- 域
- 实体型
- 实体集
- 联系

## 六、数据库的种类

基于不同的操作系统，支持不同的数据库语言，采用不同的数据结构等：

### 6.1 关系型数据库：

种类有：

- Oracle
- DB2
- SQL Server
- MySQL

采用关系模型的数据库成为关系数据库。

#### 6.1.1关系模型

关系模型把世界看作是由实体（Entity）和联系（Relationship）构成的。所谓实体就是指现实世界中具有区分于其他事物的特征或属性，又与其他实体有联系的对象。在关系模型中，实体通常是以表的形式来表现的。表的每一行描述实体的一个实例，表的每一列描述实体的一个特征或属性。

关系是关系模型的核心，是汇集在表结构中的行和列的集合。每个关系由一个或多个属性（列)组成，属性将类型相似的数据归纳在一起。属性与关系直接的关联如图1-8所示。

所谓联系就是指实体之间的关系，即实体之间的对应关系。联系可以分为以下3种。

- **一对一的联系**：第一个关系中的某个数组只能与第二个关系中的一个数组有关;同样，第二个关系中的某个数组只能与第一个关系中的一个数组有关，例如，NO 关系和NAME关系之间是一对一的联系，对应于第一个关系列出的每个学号，第二个关系只能列出一个姓名，反之亦然。
- **一对多的联系**：第一个关系中的某个数组可以与第二个关系中的一个或多个数组有关，但是第二个关系中的某个数组只能与第一个关系中的一个数组有关。例如，SEX关系和NO关系就是一对多的联系，反之，NO关系和SEX关系就是多对一的联系。
- **多对多的联系**：在这种联系中，第一个关系中的某个数组可以与第二个关系中的一个或者多个数组有关，并且第二个关系中的某个数组也可以与第一个关系中的一个或者多个数组有关。例如，SEX关系和DEPARTMENT关系就是多对多的联系。

#### 6.1.2 Codd十二法则

关系数据库是由 E.F.Codd 博士于1970年在一篇名为”一种存储大型共享数据的关系模型“的论文中提出的。一个完美的、完全符合数据库技术的关系数据库系统，需要满足Codd博士提出的十二条法则。

- 信息法则:关系型数据库的所有信息都被清楚地表示成表中的数据，即表行中的列值。
- 授权存储法则:保证关系数据库中的每一个数据项，都可以通过“表名+主键+列名”的组合来访问。
- NULL值的系统处理:DBMS对 NULL值（未知或不可使用的数据）应提供系统支持.NULL值并不是零，也不是空白的字符串。
- 一个活跃的、在线数据字典应作为关系型表来储存:在逻辑上，数据库的描述及其内容都被表示为表的形式，并能用数据库语言进行查询。
- 必须提供数据存取语言进行存取访问:至少有一种具有严格、统一语法的语言，该语言必须支持数据定义、视图定义、数据操作、安全性、完整性约束规则、授权和事务处理。
- 视图更新法则:所有理论上能被更新的视图应当是可被系统更新的。
- 集合级的插入、更新和删除:DBMS不仅支持集合级上的检索，还应支持集合级的插入、更新和删除操作。
- 数据的物理独立性:应用不依赖于物理结构，当数据的存储结构或者物理存取方法改变时，应用程序在逻辑上应不受影响。
- 数据的逻辑独立性:如果一个表被分成两个部分，则可应用视图连接在一起，以便不会对应用产生影响。
- 数据完整性的独立性:数据库语言必须能够定义完整性规则，这些完整性规则应该储存在数据字典中。
- 分布独立性:一个数据库即使被分布，也应该能工作。
- 非破坏性原则:如果允许采用低级语言存取数据，则该低级语言一定不能绕过用数据库语言定义的安全性和完整性原则。

虽然没有一个商业上可用的数据库完全遵循Codd 的所有12条法则，但是Codd 规则从历史的角度来看是重要的，这些规则有助于判断一个DBMS是否基于关系模型。

#### 6.1.3 范式

构造数据库必须遵循一定的规则，在关系数据库中，这种规则就是范式。范式是符合某一种级别的关系模式的集合。关系数据库中的关系必须满足一定的要求，即满足不同的范式。目前关系数据库有6种范式:第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、第四范式（4NF）、第五范式（5NF）和第六范式（6NF）。满足最低要求的范式是第一范式（1NF）。在第一范式的基础上进一步满足更多要求的称为第二范式（2NF），其余范式以此类推。一般说来，数据库只需满足第三范式（3NF）就可以了。下面举例介绍第一范式（1NF）、第二范式（2NF）和第三范式（3NF）。

##### 第一范式（1NF）

在任何关系数据库中,第一范式（1NF）是对关系模式的基本要求,不满足第一范式（1NF）的数据库就不是关系数据库。第一范式主要包括以下指导原则。

- 数据库表的每一列都是不可分割的基本数据项，同一列中不能有多个值，即实体中的某个属性不能有多个值或重复的属性。如果出现重复的属性，数据库就可能需要定义一个新的实体，新的实体由重复的属性构成，新实体与原实体之间为一对多关系。
- 表的每一行只包含一个实例的信息。

简而言之，第一范式就是无重复的列。

##### 第二范式（2NF）

第二范式（2NF）是在第一范式（1NF）的基础上建立起来的，即满足第二范式(2NF)必须先满足第一范式(1NF)。

第二范式（2NF）要求数据库表中的每个实例或行必须是唯一的。为实现区分，我们通常需要为表加上一个列，以存储各个实例的唯一标识。如员工信息表中加上了员工编号EMP_ID 列，每个员工的编号是唯一的，因此每个员工可以被唯一区分。这个唯一属性列被称为主关键字或主键、主码。

第二范式（2NF）要求实体的属性完全依赖于主关键字。所谓完全依赖是指不能存在仅依赖主关键字一部分的属性。如果存在，那么这个属性和主关键字的这一部分应该分离出来形成一个新的实体，新实体与原实体之间是一对多的关系。为实现区分，我们通常需要为表加上一个列，以存储各个实例的唯一标识。简而言之，第二范式就是非主属性非部分依赖于主关键字。

##### 第三范式（3NF）

满足第三范式（3NF）必须先满足第二范式（2NF）。简而言之，第三范式（3NF）要求一个数据库表中不包含已在其他表中包含的非主关键字信息。例如一个部门信息表，其中每个部门有部门编号DEPT_ID、部门名称、部门简介等信息。那么我们在员工信息表中列出部门编号DEPT_ID后，就不能再将部门名称、部门简介等与部门有关的信息加入员工信息表中。如果不存在部门信息表，则根据第三范式（3NF）也应该构建它，否则就会有大量的数据冗余。

#### 6.1.4 主键

选取主键的一个基本原则是：不使用任何业务相关的字段作为主键。因此，身份证号、手机号、邮箱地址这些看上去可以唯一的字段，均*不可*用作主键。

关系数据库实际上还允许通过多个字段唯一标识记录，即两个或更多的字段都设置为主键，这种主键被称为联合主键。

#### 6.1.5 外键

可以把数据与另一张表关联起来，这种列称为`外键`。

#### 6.1.5 约束

第一种分类：

- 非空约束（not null）：不能为NULL
- 唯一约束（unique）:不能重复
- 主键约束（primary key）：既不能为NULL，也不能重复
- 外键约束（foreign key）：
- 检查约束（check）：Oracle才有

第二种分类：

- 列级约束：NOT NULL 只有列级约束
- 表级约束

### 6.2 NoSQL（Not only SQL）数据库

- 键值（Key-Value）储存数据库：

- 列存储数据库

- 文档型数据库

- 图数据库

### 6.3 NewSQL数据库

- PostgreSQL
- Spanner





